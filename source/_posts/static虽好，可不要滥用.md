---
title: static虽好，可不要滥用
date: 2017-10-30 18:12:01
tags: [安卓,Java]
categories: [安卓学习]
---

### Java中static作用详解
 	在自己的项目中已经两次入了static的坑，正如title所讲，static虽好但是请别滥用。
 	static表示"静态"、"全局"的意思，可以修饰成员变量、方法，以及静态代码块，一下列举几种常用的static用法：

 1. 静态域（静态变量）
	如果将类中的域定义为static，那么所有该类的对象共享这一个静态域。域分为实例域与静态域。静态域属于类而不属于任何一个独立的对象。<!--more--> 这也是我做项目是出现问题的所在，因为静态域可以更方便的访问，直接使用类名.静态域就可以轻松的访问，而忽略该类所有对象共用这一个域导致初始化出现遗漏。第一次是在图表类ChartService中将通道数设置为了静态变量，因为纵向梯度曲线比原始数据曲线数量少1，而导致原始数据数据集与数据渲染器初始化少了1，无法显示完整的曲线。第二次在读数据线程中，将暂停的flag设置为了静态变量，导致后面继续测量无法获取到数据，而调试了好久。
	
 2. 静态常量（使用比静态变量多）
    比如Math类中定义到：
 ```
public class Math{
	...
	public static final double PI = 3.14159265358979323846;
	...
}
 ```
 	然后就可以通过Math.PI的形式访问。
	 另外我们输出经常会用到System.out，它其实也是一个静态常量
 ```
 public static final PrintStream out = ...;
 ```
​	但是Syetem类中却有一个setOut的方法，并且可以将System.out设置为不同的流。原因是setOut是一个本地方法，而不是通过java语言实现，本地方法可以绕过java语言的存取控制机制。


 3. 静态方法
 静态方法是一种不能向对象实施操作的方法。Math.pow(x,a)计算x的a次方。静态方法是没有this参数的方法。静态方法不能访问实例域（静态方法不能操作对象），只能访问自身类中的静态域。
 4. 静态代码块

 ```
 static {
 	...
 }
 ```
​	静态代码块在类中独立于类成员，可以有多个，位置可以随便放，它不在任何的方法体内，JVM加载类时会执行这些静态的代码块，如果 static 代码块有多个，JVM将按照它们在类中出现的先后顺序依次执行它们，每个代码块只会被执行一次。执行顺序先于构造函数。

5. 静态导包

   对于静态工具类，可以采用静态导包的方式引入包，就可以直接使用该包中的静态方法。