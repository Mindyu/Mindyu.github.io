---
title: 品优购项目学习笔记
date: 2018-12-18 20:27:17
tags: [品优购,电商系统,项目实战]
categories: [项目学习]
---

一个综合性的 B2B2C 的电商网站系统。网站采用商家入驻的模式，商家入驻平台提交申请，有平台进行资质审核，审核通过后，商家拥有独立的管理后台录入商品信息。商品经过平台审核后即可发布。 

[Github地址](https://github.com/Mindyu/pinyougou)

<!-- more -->

### 项目简介

**系统模块**
 - 网站前台
 - 运营商平台
 - 商家管理平台



**框架组合**

​	前端 angularJS + Bootstrap 

​	后端 Spring + SpringMVC + mybatis + Dubbox



**系统架构**
​	面向服务的架构（SOA架构）。控制层与服务层分离，通过网络调用。
<img src="https://hexoblog-1253306922.cos.ap-guangzhou.myqcloud.com/photo2018/%E5%93%81%E4%BC%98%E8%B4%AD/%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%9E%B6%E6%9E%84.jpg" width = 50% height = 50% />



**Dubbox框架**
	致力于提供高性能和透明化的RPC远程服务调用方案，以及SOA服务治理方案。远程服务调用的分布式框架。

原理图
<img src="https://hexoblog-1253306922.cos.ap-guangzhou.myqcloud.com/photo2018/%E5%93%81%E4%BC%98%E8%B4%AD/Dubbox%E5%8E%9F%E7%90%86.jpg" width = 50% height = 50% />

节点角色说明：

 - Provider: 暴露服务的服务提供方。 
 - Consumer: 调用远程服务的服务消费方。 
 - Registry: 服务注册与发现的注册中心。
 - Monitor: 统计服务的调用次调和调用时间的监控中心。 
 - Container: 服务运行容器。



*Dubbox 本地 jar 包部署与安装 ：*

Dubbox 并不在 maven 中央仓库，需安装到本地仓库。将 dubbo-2.8.4.jar 包放到 d:\setup, 然后输入命令

`mvn install:install-file -Dfile=d:\setup\dubbo-2.8.4.jar -DgroupId=com.alibaba -DartifactId=dubbo -Dversion=2.8.4 -Dpackaging=jar` 即可。



*管理中心的部署 ：*

开发过程中需要知道注册了哪些服务以便测试与管理。通过部署一个管理中心来实现。其实管理中心就是一个web应用，部署到tomcat即可。 

- 编译 dubbox 源码，dubbox-master.zip 文件中的 dubbox-master 目录下，执行 mvn package -Dmaven.skip.test=true 。即可在 target 目录下看到 dubbo-admin-2.8.4.war 。将 war 包放置到服务器的 webapps 下。
- 如果你部署在zookeeper同一台主机并且端口是默认的2181，则无需修改任何配置。如果不是在一台主机上或端口被修改，需要修改 WEB-INF 下的 dubbo.properties  ，修改如下配置：
  `dubbo.registry.address=<zookeeper://127.0.0.1:2181>` 修改后重新启动tomcat。
- <http://虚拟机ip:8080/dubbo-admin> 用户名 root 密码

<img src="https://hexoblog-1253306922.cos.ap-guangzhou.myqcloud.com/photo2018/%E5%93%81%E4%BC%98%E8%B4%AD/dubbox%E7%AE%A1%E7%90%86%E4%B8%AD%E5%BF%83.jpg" width = 50% height = 50% />

*注册中心 Zookeeper :*

- 上传 zookeeper 包，解压缩，创建 data 目录，修改 zoo.cfg 配置文件的 dataDir 配置
- 启动命令 安装目录 /root/zookeeper-3.4.6/



<img src="https://hexoblog-1253306922.cos.ap-guangzhou.myqcloud.com/photo2018/%E5%93%81%E4%BC%98%E8%B4%AD/zookeeper%E6%9C%8D%E5%8A%A1.jpg" width = 50% height = 50% />



**模块关联关系图：**

<img src="https://hexoblog-1253306922.cos.ap-guangzhou.myqcloud.com/photo2018/%E5%93%81%E4%BC%98%E8%B4%AD/%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97%E5%9B%BE.png" width = 50% height = 50% />



克隆项目之后，使用 Eclipse 打开，导入Maven项目，此时会报找不到 dubbox 和 fastDFS 依赖包。而这两个依赖包不在 Maven 中央仓库中，所以需要我们手动将这两个包导入本地依赖库。

```
mvn install:install-file -Dfile=D:\src\dubbo-2.8.4.jar -DgroupId=com.alibaba -DartifactId=dubbo -Dversion=2.8.4 -Dpackaging=jar

// 然后配置离线约束：XML Catalog
http://code.alibabatech.com/schema/dubbo/dubbo.xsd


mvn  install:install-file  -DgroupId=org.csource.fastdfs  -DartifactId=fastdfs  -Dversion=1.2 -Dpackaging=jar -Dfile=d:\src\fastdfs_client_v1.20.jar


```

以上配置包存放在 https://github.com/Mindyu/pinyougou 下的 src 目录中。另外如果本地仓库安装依赖包之后依然报错，那么可能是 Eclipse 的 Maven 配置路径没有修改为本地的仓库路径。

