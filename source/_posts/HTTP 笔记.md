---
title: HTTP 笔记
date: 2018-12-5 22:45:41
tags: [HTTP,笔记整理,面经]
categories: [HTTP 学习]
---



### Forward 和 Redirect 的区别

#### 直接转发方式（Forward、转发）

- 服务器内部的重定向，服务器直接访问目标地址的 url 网址，把里面的东西读取出来，但是客户端并不知道，因此用 forward 的话，客户端浏览器的网址是不会发生变化的。
- 关于 request：由于在整个定向的过程中用的是同一个 request，因此 forward 会将 request 的信息带到被重定向的 jsp 或者 servlet 中使用。

#### 间接转发方式（Redirect、重定向）

- 客户端的重定向，是完全的跳转。即服务器返回的一个 url 给客户端浏览器，然后客户端浏览器会重新发送一次请求，到新的 url 里面，因此浏览器中显示的url 网址会发生变化。
- 因为这种方式比 forward 多了一次网络请求，因此效率会低于 forward。

<!--more-->

### HTTP 与 HTTPs

#### HTTP

HTTP是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。

**HTTP 存在的问题**

1. 使用明文进行通信，内容容易被监听

2. 不验证通信方的身份，通信方可能遭伪装

3. 无法证明报文的完整性，报文可能被篡改

   

#### HTTPS

HTTPS是以安全为目标的HTTP通道，简单讲是HTTP的安全版。HTTP 先和SSL（Secure Sockets Layer安全套接层） 通信，再由SSL 和TCP 通信。使用隧道进行通信，使其具备加密、认证和完整性保护。

1. **加密**

- 对称密钥加密
  - 加密和解密使用同一个密钥
  - 优点：运算速度快
  - 缺点：密钥容易被获取
- 非对称密钥加密（公开密钥加密）
  - 使用一对密钥进行加密和解密，分别为公开密钥和私有密钥。
  - 优点：更为安全
  - 缺点：运算速度慢
- 混合加密方式 （HTTPS采用的加密方式）
  - 使用公开密钥进行加密用于传输对称密钥，之后使用对称密钥加密通信。

2. **认证**

通过证书来对通信方进行认证

3. **完整性**

SSL 提供报文摘要功能来验证完整性



HTTPS 协议的主要作用可以分为两种

- 一种是建立一个信息安全通道，来保证数据传输的安全
- 一种就是确认网站的真实性。



#### 区别

- https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。
- http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。
- http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
- http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。





### HTTP 方法

#### 种类(8种)

> GET：请求指定的页面信息，并返回实体主体。
>
> HEAD：类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头
>
> POST：向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。
>
> PUT：从客户端向服务器传送的数据取代指定的文档的内容。
>
> DELETE：请求服务器删除指定的页面。
>
> CONNECT：HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。
>
> OPTIONS：允许客户端查看服务器的性能。
>
> TRACE：回显服务器收到的请求，主要用于测试或诊断。



#### GET 与 POST 区别

> 1. GET执行一次与执行多次效果是一样的。服务器状态是一样的。**幂等性**
> 2. GET在浏览器回退时是无害的，而POST会再次提交请求。
> 3. GET产生的URL地址可以被收藏为书签，而POST不可以。
> 4. GET请求会被浏览器主动cache，而POST不会，除非手动设置。
> 5. GET请求只能进行url编码，而POST支持多种**编码方式**。
> 6. GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。
> 7. GET请求在URL中传送的**参数**是有长度限制的，而POST没有。
> 8. 对参数的数据类型，GET只接受ASCII字符，而POST没有限制。
> 9. GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。
> 10. GET参数通过URL传递，POST放在Request body中。
> 11. GET产生一个TCP数据包；POST产生两个TCP数据包。
>
> - 对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；
> - 而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。



### HTTP 状态码 

- 1**	信息，服务器收到请求，需要请求者继续执行操作
- 2**	成功，操作被成功接收并处理
  - 201 Created 已创建。成功请求并创建了新的资源
  - 202 Accepted 已接受。已经接受请求，但未处理完成
  - 204	No Content 无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档
  - 205	Reset Content 重置内容。服务器处理成功，用户终端（例如：浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域
  - 206 Partial Content 部分内容。服务器成功处理了部分GET请求
- 3**	重定向，需要进一步的操作以完成请求
- 4**	客户端错误，请求包含语法错误或无法完成请求
  - 401 Unauthorized 请求要求用户的身份认证
  - 403 Forbidden 服务器理解请求客户端的请求，但是拒绝执行此请求
  - 404 Not Found 服务器无法根据客户端的请求找到资源（网页）
- 5**	服务器内部错误，服务器在处理请求的过程中发生了错误
  - 501	Not Implemented 服务器不支持请求的功能，无法完成请求
  - 502	Bad Gateway 充当网关或代理的服务器，从远端服务器接收到了一个无效的请求



### HTTP 头部

通常HTTP消息包括客户机向服务器的请求消息和服务器向客户机的响应消息。这两种类型的消息由一个起始行，一个或者多个头域，一个只是头域结束的空行和可选的消息体组成。HTTP的头域包括**通用头，请求头，响应头和实体头**四个部分。

- 通用头域
  - Cache-Control 指定请求和响应遵循的缓存机制
  - Connection 连接状态 （长连接 or 短连接）
  - Date 消息发送的时间
  - Pragma 包含实现特定的指令
  - Transfer-Encoding、Upgrade、Via
- 请求头
  - Method Request-URI HTTP-Version
  - 请求方法 OPTIONS、GET、HEAD、POST、PUT、DELETE、TRACE
  - 请求 URL
  - HTTP 版本 eg: HTTP/1.1
- 响应头
  - HTTP-Version Status-Code Reason-Phrase
  - HTTP -Version 表示支持的HTTP版本，例如为HTTP/1.1。
  - Status- Code 是一个三个数字的状态代码。
  - Reason-Phrase 给Status-Code提供一个简单的文本描述。
- 实体消息
  - Content-Type 实体头用于向接收方指示实体的介质类型
  - Content-Length 表示实际传送的字节数
  - Allow 实体头至服务器支持哪些请求方法（如GET、POST等）
  - Content-Range 表示传送的范围
  - Content-Encoding 指文档的编码（Encode）方法





### Cookie与Session

#### 区别

**Session**是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中。

**Cookie**是客户端保存用户信息的一种机制，用来记录用户的一些信息。

#### 流程

每次HTTP请求的时候，客户端都会发送相应的 Cookie 信息到服务端。实际上大多数的应用都是用 Cookie 来实现 Session 跟踪的，第一次创建 Session 的时候，服务端会在 HTTP 协议中告诉客户端，需要在 Cookie 里面记录一个 Session ID，以后每次请求把这个会话 ID 发送到服务器，我就知道你是谁了。



Cookie的内容主要包括：名字，值，过期时间，路径和域

Cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗，考虑到安全应当使用session。

#### 常见问题

如果客户端浏览器禁用了Cookie怎么办？

1. URL重写的技术来进行会话跟踪，客户端每次请求时，在URL中添加一个诸如 sid=xxxxx 这样的参数
2. 表单隐藏字段。服务器会自动修改表单，添加一个隐藏字段，以便在表单提交时能够把session id传递回服务器



> HTTP状态码 http://www.runoob.com/http/http-status-codes.html